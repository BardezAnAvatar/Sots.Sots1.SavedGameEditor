name: Build (.NET Framework)
description: Build the solution using MSBuild

runs:
  using: "composite"
  steps:
    - name: Setup MSBuild
      uses: microsoft/setup-msbuild@v2

    - name: Setup NuGet
      uses: NuGet/setup-nuget@v2
      
    - name: Navigate to Workspace
      shell: PowerShell
      run: cd ${{ github.workspace }}

    - name: Create Build Directory
      shell: PowerShell
      run: mkdir ${{ github.workspace }}/_build
      
    - name: Restore Packages
      shell: PowerShell
      run: nuget restore "SotS Savegame Editor.sln"

    - name: Build Solution
      shell: PowerShell
      run: |
        msbuild.exe "SotS Savegame Editor.sln" `
            /nologo /nr:false `
            /p:DeployOnBuild=true `
            /p:DeployDefaultTarget=WebPublish `
            /p:WebPublishMethod=FileSystem `
            /p:DeleteExistingFiles=True `
            /p:platform="Any CPU" `
            /p:configuration="Release" `
            /p:OutputPath="${{ github.workspace }}/_build"
